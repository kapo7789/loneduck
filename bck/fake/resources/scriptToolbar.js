if(typeof window.mailRuToolbarDriver=="undefined"){window.mailRuToolbarDriver=(function(n,z){var j=false;var e,s,r,a,f="portal-headline__projects_open",t,D,A,q={mail_cnt:"g_mail_events",my_cnt:"g_my_events",games_cnt:"g_games_events"};function B(d){d.stopPropagation?d.stopPropagation():d.cancelBubble=true;d.preventDefault?d.preventDefault():d.returnValue=false;}function u(d,w,l,m){if(w.addEventListener){w[d?"addEventListener":"removeEventListener"](l,m,false);}else{if(w.attachEvent){w[d?"attachEvent":"detachEvent"]("on"+l,m);}}}function b(l,d){return l.className.match(new RegExp("(\\s|^)"+d+"(\\s|$)"));}function o(l,d){if(!b(l,d)){l.className+=" "+d;}}function p(m,d){if(b(m,d)){var l=new RegExp("(\\s+|^)"+d+"(\\s+|$)");m.className=m.className.replace(l," ");}}function y(d){clearTimeout(D);D=null;B(d);b(a,f)?x():i();}function i(){e=z.getElementById("topPanel");u(1,z,"click",x);if(e){e.style.zIndex=5000;}o(a,f);}function x(){u(0,z,"click",x);if(e){e.style.zIndex=2501;}p(a,f);}function c(){clearTimeout(D);D=null;}function g(){clearTimeout(D);D=setTimeout(x,4000);}function h(w,E,m){t=null;var l=z.getElementsByTagName("head")[0];if(A){l.removeChild(A);}var d=n.top.MRG_toolbarUpdateTimeout;if(d>0&&z.getElementById("mailRuToolbar")){A=z.createElement("script");A.type="text/javascript";A.src=window.MRG_TCL+"?JSONP_call=MRG_updateToolbar&gamescnt=1&rnd="+Math.random();l.appendChild(A);if(!m){t=setTimeout(h,d);}}else{n.top.MRG_updateToolbar=null;}}var C=function(){if(j){return;}j=true;s=z.getElementById("portal-headline__menulink");r=z.getElementById("portal-headline__menu");a=z.getElementById("portal-headline__box");if(s==null||r==null||a==null){return;}u(1,s,"click",y);u(1,s,"mouseout",g);u(1,s,"mouseover",c);u(1,r,"mouseout",g);u(1,r,"mouseover",c);if(!n.top.MRG_updateToolbar){n.top.MRG_updateToolbar=function(d){var w="portal-headline__link_ext";for(var l in q){var m=z.getElementById(q[l]);if(!m){continue;}if(d&&d.status==="ok"&&d.data&&(d.data[l]>0||d.data[l]==="99+")){o(m.parentNode,w);m.innerHTML=d.data[l];}else{p(m.parentNode,w);}}};h();}else{h(0,0,true);}},v=function(){j=false;if(D!=null){clearTimeout(D);D=null;}if(t!=null){clearTimeout(t);t=null;}},k=function(){v();C();};setTimeout(C,1000);return{bind:C,unbind:v,rebind:k};})(window,document);}